window.require=function(e){switch(e){case"@apollo/client":return window.PluginApi.libraries.Apollo;case"@fortawesome/free-regular-svg-icons":return window.PluginApi.libraries.FontAwesomeRegular;case"@fortawesome/free-solid-svg-icons":return window.PluginApi.libraries.FontAwesomeSolid;case"mousetrap":return window.PluginApi.libraries.Mousetrap;case"mousetrap-pause":return window.PluginApi.libraries.MousetrapPause;case"react":return window.PluginApi.React;case"react-bootstrap":return window.PluginApi.libraries.Bootstrap;case"react-dom":return window.PluginApi.ReactDOM;case"react-intl":return window.PluginApi.libraries.Intl;case"react-router-dom":return window.PluginApi.libraries.ReactRouterDOM;case"react-select":return window.PluginApi.libraries.ReactSelect}};var e=require("react");function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var o,i=r((t||(t=1,o=n,function(){var e={}.hasOwnProperty;function r(){for(var e="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(e=n(e,t(o)))}return e}function t(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var o="";for(var i in t)e.call(t,i)&&t[i]&&(o=n(o,i));return o}function n(e,r){return r?e?e+" "+r:e+r:e}o.exports?(r.default=r,o.exports=r):window.classNames=r}()),n.exports));function a(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t}"function"==typeof SuppressedError&&SuppressedError;const l=r=>{var t,n,o,i,l,u,d,{performer:p}=r,g=a(r,["performer"]);const{hovercard_image:m,hovercard_video:f}=p.custom_fields,v=m?e.createElement(s,{hovercard_image:m}):null,w=f?e.createElement(c,{hovercard_video:f,preferFullVideos:null!==(n=null===(t=g.config)||void 0===t?void 0:t.preferFullVideos)&&void 0!==n&&n,soundActive:null!==(l=null===(i=null===(o=g.stashSettings)||void 0===o?void 0:o.interface)||void 0===i?void 0:i.soundOnPreview)&&void 0!==l&&l}):null;return e.createElement("div",{className:"image-wrapper"},e.createElement("img",{loading:"lazy",className:"performer-card-image main-image",alt:null!==(u=p.name)&&void 0!==u?u:"",src:null!==(d=p.image_path)&&void 0!==d?d:""}),null!=w?w:v)},s=({hovercard_image:r})=>{const t="number"==typeof r?"/image/"+r+"/image":r;return e.createElement("img",{loading:"lazy",className:"performer-card-image hover-image",src:t})},c=r=>{var{hovercard_video:t,soundActive:n}=r,o=a(r,["hovercard_video","soundActive"]);const i=e.useRef(null);e.useEffect((()=>{var e;(null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.volume)&&(i.current.volume=n?.05:0)}),[n]);const l=o.preferFullVideos?"/stream":"/preview",s="number"==typeof t?"/scene/"+t+l:t;return e.createElement("video",{className:"performer-card-image hover-video",disableRemotePlayback:!0,playsInline:!0,muted:!n,loop:!0,preload:"none",onMouseOver:e=>e.target.play(),onMouseOut:e=>e.target.pause(),ref:i,src:s})},{PluginApi:u}=window;u.patch.instead("PerformerCard",(function(r,t,n){const o=i("valkyr-hover-card");return[e.createElement("div",{className:o},e.createElement(n,Object.assign({},r)))]})),u.patch.instead("PerformerCard.Image",(function(r,t,n){const o=u.GQL.useConfigurationQuery();if(!o.loading){const t=Object.assign(Object.assign({},r),{config:o.data.configuration.plugins.hovercards,stashSettings:o.data.configuration});return console.log("extendedProps",t),[e.createElement(l,Object.assign({},t))]}return[e.createElement(n,Object.assign({},r))]}));
